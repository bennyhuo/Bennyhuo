# 闲话 Swift 协程（2）：将回调改写成 async 函数

**Swift Swift5.5**

> 最理想的情况下，系统、第三方框架当中使用回调的 API 都最好在一夜之间改成 async 函数，显然这不太现实。

==  Swift|Coroutines|async await ==

我们前面已经简单介绍了 Swift 的协程，可以确认的一点是，如果你只是看了上一篇文章，那么你肯定还是不会用这一个特性。你一定还有一些疑问：

1. 异步函数是谁提供的？我可以自己定义吗？我该怎么正确地定义一个异步函数？
2. 既然普通函数不能调用异步函数，那定义好的这些异步函数该从哪儿开始调用呢？

这一篇文章将回答第一个问题，而第二个问题将在下一篇文章当中给出答案。



异步函数谁都可以提供，不然它的应用范围就会大大受限制，因此我们既可以有机会使用到系统或者第三方框架提供的异步函数，也自然有机会自己去定义。那关键的问题就是如何定义异步函数了。

我们先随便定义一个函数：

```swift
func hello() -> Int{
    1
}
```

这个函数返回了一个整数 1。接下来我们把它改造成异步函数，只需要加上 async 关键字：

```swift
func hello() async -> Int{
    1
}
```

那么，它现在真的是异步的吗？当然不是，它只是长得像罢了。

async 关键字并不会真正带来异步，那么异步的能力是谁提供的？这时候我们就要想想，过去我们见到的异步函数都是什么样的：

```swift
func helloAsync(onComplete: (Int) -> Void) {
    // 
    onComplete(1)
}
```