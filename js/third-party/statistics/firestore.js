firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId}),function(){const r=(o,r)=>o.get().then(e=>{let t=e.exists?e.data().count:0;return r&&(t++,o.set({count:t})),t});const n=firebase.firestore().collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",()=>{if(CONFIG.page.isPost){var t=document.querySelector(".post-title").textContent.trim(),o=n.doc(t);let e=CONFIG.hostname===location.hostname;localStorage.getItem(t)?e=!1:localStorage.setItem(t,!0),r(o,e).then(e=>{document.querySelector(".firestore-visitors-count").innerText=e})}else CONFIG.page.isHome&&(t=[...document.querySelectorAll(".post-title")].map(e=>{e=e.textContent.trim(),e=n.doc(e);return r(e)}),Promise.all(t).then(e=>{const o=document.querySelectorAll(".firestore-visitors-count");e.forEach((e,t)=>{o[t].innerText=e})}))})}();